<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Incident & Problem Management</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>

<div class="board">

  <!-- D0 INCIDENT OVERVIEW (NO data-edited) -->
  <div class="column col-d0" data-phase="D0">
    <div class="header">Incident Overview & Evidence</div>
    <div class="content">
      <label>Incident / Case ID</label>
      <input data-path="case_id" id="case-id-input" required>

      <label>Status</label>
      <input value="new" readonly data-path="status">

      <label>Opening Date</label>
      <input type="date" data-path="created_at">

      <label>Closure Date</label>
      <input type="date" readonly data-path="closed_at">

      <button data-action="upload-evidence" disabled>Upload Evidence</button>

      <div class="muted">No evidence uploaded yet.</div>
    </div>
    <div class="footer">
      Status is derived automatically: new → in_progress → completed
    </div>
  </div>

  <!-- D1 -->
  <div class="column col-d12" data-phase="D1" data-edited="false">
    <div class="header">Problem Initiation (D1–D2)</div>
    <div class="content scroll-y">
      <label>Problem Description</label>
      <textarea data-path="qrqc.D1.problem_statement"></textarea>

      <div class="two-col">
        <div>
          <label>Country</label>
          <input data-path="case_info.country">
        </div>
        <div>
          <label>Site / Location</label>
          <input data-path="case_info.plant">
        </div>
      </div>

      <label>Department / Area</label>
      <input data-path="case_info.process">

      <label>Involved People / Teams</label>
      <textarea data-path="qrqc.D1.involved_people"></textarea>
    </div>
    <div class="footer">Define scope and context.</div>
  </div>

  <!-- D3 -->
  <div class="column col-d3" data-phase="D3" data-edited="false">
    <div class="header">Problem Definition (D3)</div>
    <div class="content scroll-y">
      <label>What happened?</label>
      <textarea data-path="qrqc.D3.what_happened"></textarea>

      <label>Why is this a problem?</label>
      <textarea data-path="qrqc.D3.why_problem"></textarea>

      <div class="two-col">
        <div>
          <label>When?</label>
          <input data-path="qrqc.D3.when">
        </div>
        <div>
          <label>Where?</label>
          <input data-path="qrqc.D3.where">
        </div>
      </div>

      <div class="two-col">
        <div>
          <label>Who?</label>
          <input data-path="qrqc.D3.who">
        </div>
        <div>
          <label>How identified?</label>
          <input data-path="qrqc.D3.how_identified">
        </div>
      </div>

      <label>Impact (how many / how much)</label>
      <input data-path="qrqc.D3.impact">
    </div>
    <div class="footer">Shared factual understanding.</div>
  </div>

  <!-- D4 -->
  <div class="column col-d4 wide" data-phase="D4" data-edited="false">
    <div class="header">Immediate Actions (D4)</div>
    <div class="content scroll-y">
      <table>
        <tbody>
          <tr>
            <td><input data-path="qrqc.D4.actions[0].action"></td>
            <td><input data-path="qrqc.D4.actions[0].owner"></td>
            <td><input type="date" data-path="qrqc.D4.actions[0].due"></td>
            <td><input type="date" data-path="qrqc.D4.actions[0].actual"></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="footer">Contain and protect stakeholders.</div>
  </div>

  <!-- D5 -->
  <div class="column col-d5 huge" data-phase="D5" data-edited="false">
    <div class="header">Cause Analysis (D5)</div>
    <div class="content scroll-y">
      <h3>5 WHYs – Analysis A</h3>
      <input data-path="qrqc.D5.whyA[0]">
      <input data-path="qrqc.D5.whyA[1]">
      <input data-path="qrqc.D5.whyA[2]">
      <input data-path="qrqc.D5.whyA[3]">
      <input data-path="qrqc.D5.whyA[4]">
    </div>
    <div class="footer">Identify and validate root causes.</div>
  </div>

  <!-- D6 -->
  <div class="column col-d6 wide" data-phase="D6" data-edited="false">
    <div class="header">Permanent Actions (D6)</div>
    <div class="content scroll-y">
      <table>
        <tbody>
          <tr>
            <td><input data-path="qrqc.D6.actions[0].action"></td>
            <td><input data-path="qrqc.D6.actions[0].owner"></td>
            <td><input type="date" data-path="qrqc.D6.actions[0].due"></td>
            <td><input type="date" data-path="qrqc.D6.actions[0].actual"></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="footer">Prevent recurrence.</div>
  </div>

  <!-- D7 / D8 -->
  <div class="column col-d78" data-phase="D7" data-edited="false">
    <div class="header">Prevention & Closure (D7–D8)</div>
    <div class="content">
      <label>Procedures updated?</label>
      <input data-path="qrqc.D7.procedures_updated">

      <label>Training completed?</label>
      <input data-path="qrqc.D7.training_completed">

      <label>Quality approved?</label>
      <input data-path="qrqc.D7.quality_approved">

      <label>Closure Date</label>
      <input type="date" data-path="qrqc.D8.closure_date">
    </div>
    <div class="footer">Standardisation and closure.</div>
  </div>

  <!-- AI -->
  <div class="column col-ai">
    <div class="header">AI Analysis</div>
    <div class="content">
      <button data-action="run-agent" disabled>Run AI Analysis</button>
      <div class="muted">Agent status: idle</div>
    </div>
  </div>

</div>

<script src="ui.js"></script>

</body>
</html>
