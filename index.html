<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ValueSims â€“ AI-Assisted Decision Support</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="styles.css"/>
</head>

<body>
<header class="topbar">
  <h1>AI-Assisted Decision Support</h1>
  <p>Structured problem & incident resolution</p>
</header>

<div class="layout">

<div class="left-panel">

<!-- SECTION 1 -->
<section class="section open completed" data-section="case_information">
  <div class="section-header" onclick="toggleSection(this)">
    <span class="step">1</span><h2>Case Information</h2>
  </div>
  <div class="section-body">
    <label>Case Number</label>
    <input data-field="case_id" oninput="updateState()"/>

    <label>Date</label>
    <input type="date" data-field="date" oninput="updateState()"/>

    <label>Problem Title</label>
    <input data-field="problem_title" oninput="updateState()"/>

    <label>Team Members</label>
    <input data-field="team_members" oninput="updateState()"/>
  </div>
</section>

<!-- SECTION 2 -->
<section class="section" data-section="incident">
  <div class="section-header" onclick="toggleSection(this)">
    <span class="step">2</span><h2>Incident / Problem Description</h2>
  </div>
  <div class="section-body">
    <label>What is the problem?</label>
    <textarea data-field="what" oninput="updateState()"></textarea>

    <label>Why is it a problem?</label>
    <textarea data-field="why_problem" oninput="updateState()"></textarea>

    <label>When did it occur?</label>
    <input data-field="when" oninput="updateState()"/>

    <label>Where did it occur?</label>
    <input data-field="where" oninput="updateState()"/>

    <label>Who identified it?</label>
    <input data-field="who" oninput="updateState()"/>

    <label>How was it identified?</label>
    <textarea data-field="how_identified" oninput="updateState()"></textarea>

    <label>Impact / frequency</label>
    <input data-field="impact" oninput="updateState()"/>
  </div>
</section>

<!-- SECTION 3 -->
<section class="section" data-section="immediate_actions">
  <div class="section-header" onclick="toggleSection(this)">
    <span class="step">3</span><h2>Immediate Actions</h2>
  </div>
  <div class="section-body">
    <table id="immediateActions">
      <thead>
        <tr><th>Action</th><th>Owner</th><th>Due</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <button onclick="addRow('immediateActions')">+ Add Action</button>
  </div>
</section>

<!-- SECTION 4 -->
<section class="section" data-section="investigation">
  <div class="section-header" onclick="toggleSection(this)">
    <span class="step">4</span><h2>Investigation & Analysis</h2>
  </div>
  <div class="section-body">

    <h4>Investigation Tasks</h4>
    <table id="investigationTasks">
      <thead>
        <tr><th>Item</th><th>Owner</th><th>Due</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <button onclick="addRow('investigationTasks')">+ Add Task</button>

    <h4>Fishbone (Causes)</h4>
    <div class="fishbone">
      <div><h5>People</h5><ul id="fish-people"></ul><button onclick="addListItem('fish-people')">+</button></div>
      <div><h5>Process</h5><ul id="fish-process"></ul><button onclick="addListItem('fish-process')">+</button></div>
      <div><h5>Product</h5><ul id="fish-product"></ul><button onclick="addListItem('fish-product')">+</button></div>
      <div><h5>Procedure</h5><ul id="fish-procedure"></ul><button onclick="addListItem('fish-procedure')">+</button></div>
      <div><h5>Policy</h5><ul id="fish-policy"></ul><button onclick="addListItem('fish-policy')">+</button></div>
      <div><h5>Place</h5><ul id="fish-place"></ul><button onclick="addListItem('fish-place')">+</button></div>
    </div>

    <h4>5 Whys</h4>
    <div id="fiveWhyContainer"></div>
    <button onclick="addWhyChain()">+ Add 5-Why Chain</button>

  </div>
</section>

<!-- SECTION 5 -->
<section class="section" data-section="corrective_actions">
  <div class="section-header" onclick="toggleSection(this)">
    <span class="step">5</span><h2>Corrective & Preventive Actions</h2>
  </div>
  <div class="section-body">
    <table id="correctiveActions">
      <thead>
        <tr><th>Action</th><th>Owner</th><th>Due</th><th>Verification</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <button onclick="addRow('correctiveActions')">+ Add Action</button>
  </div>
</section>

</div>

<!-- RIGHT PANEL -->
<div class="right-panel">
  <h3>AI Decision Support</h3>
  <button onclick="runAI()">Request AI Decision Support</button>

  <h4>Payload Preview (JSON)</h4>
  <textarea id="jsonPreview" rows="20" readonly></textarea>
</div>

</div>

<script src="app.js"></script>
</body>
</html>
